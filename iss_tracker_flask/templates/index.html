<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
<<<<<<< HEAD
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ISS Tracker</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}">



    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

    <!-- Three.js for 3D Earth -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/examples/js/controls/OrbitControls.js"></script>

    <style>
        body {
            background: #f4f8ff;
            font-family: "Segoe UI", Arial, sans-serif;
        }

        .jumbotron {
            background: linear-gradient(135deg, #007bff, #76f210ff);
            color: white;
            padding: 3rem 2rem;
            margin-bottom: 2rem;
            border-radius: 0;
        }

        #map {
            height: 500px;
            width: 100%;
            border-radius: 10px;
        }

        #earth3d {
            width: 100%;
            height: 400px;
            min-height: 400px;
        }

        footer {
            margin-top: 40px;
            padding: 25px;
            background: #111;
            color: white;
        }
    </style>
</head>

<body>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <a class="navbar-brand" href="#">ISS Tracker</a>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarContent">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarContent">
    <ul class="navbar-nav ml-auto">

      <li class="nav-item active">
        <a class="nav-link" href="#">Home</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="#about-section">About</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="https://www.nasa.gov/spot-the-station/" target="_blank">
          Spot The Station
        </a>
      </li>

    </ul>
  </div>
</nav>

<!-- HEADER -->
<div class="jumbotron text-center">
    <h1 class="display-4">üõ∞Ô∏è ISS Live Tracker</h1>
    <p class="lead">Real-time location, crew information, and more.</p>
</div>

<!-- 3D EARTH CARD -->
<script>
const container = document.getElementById("earth3d");

function createEarth() {
    const width = container.clientWidth;
    const height = 400;

    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(50, width / height, 0.1, 1000);
    camera.position.set(0, 0, 2.5);

    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(width, height);
    container.innerHTML = "";
    container.appendChild(renderer.domElement);

    const controls = new THREE.OrbitControls(camera, renderer.domElement);
    controls.enableZoom = false;

    // ‚≠ê WORKING TEXTURE
    const textureLoader = new THREE.TextureLoader();
    textureLoader.load(
        "https://raw.githubusercontent.com/Chandu487/earthtextures/main/earth_daymap.jpg",

        function (texture) {
            const geometry = new THREE.SphereGeometry(1, 64, 64);
            const material = new THREE.MeshStandardMaterial({
                map: texture
            });

            const earth = new THREE.Mesh(geometry, material);
            scene.add(earth);

            const light = new THREE.PointLight(0xffffff, 1.2);
            light.position.set(5, 3, 5);
            scene.add(light);

            function animate() {
                requestAnimationFrame(animate);
                earth.rotation.y += 0.0015;
                renderer.render(scene, camera);
            }

            animate();
        }
    );

    // Handle window resize
    window.addEventListener("resize", () => {
        const newWidth = container.clientWidth;
        const newHeight = 400;
        camera.aspect = newWidth / newHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(newWidth, newHeight);
    });
}

createEarth();
</script>


<!-- MAIN CONTENT -->
<div class="container mb-5">

    <!-- CREW CARD -->
    <div class="card shadow-sm mb-4">
        <div class="card-body">

            <h3 class="card-title text-primary">Astronauts Aboard the ISS</h3>
            <p class="text-secondary">Currently <strong>{{ count }}</strong> astronauts:</p>

            <ul class="list-group mb-3">
                {% for person in astronauts %}
                <li class="list-group-item"><strong>{{ person.name }}</strong></li>
                {% endfor %}
            </ul>

            {% if user_location %}
                <h5>Your Approximate Location:</h5>
                <p><strong>Latitude:</strong> {{ user_location[0] }}</p>
                <p><strong>Longitude:</strong> {{ user_location[1] }}</p>
            {% else %}
                <p class="text-danger">Could not determine your location.</p>
            {% endif %}

        </div>
    </div>

    <!-- MAP CARD -->
    <div class="card shadow-sm">
        <div class="card-body">
            <h4 class="text-primary mb-3">Live ISS Position</h4>
            <div id="map"></div>
        </div>
    </div>

</div>

<!-- MAP SCRIPT -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
    const map = L.map('map').setView([0, 0], 2);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '¬© OpenStreetMap contributors'
    }).addTo(map);

    const issIcon = L.icon({
        iconUrl: 'https://upload.wikimedia.org/wikipedia/commons/d/d0/International_Space_Station.svg',
        iconSize: [50, 32],
        iconAnchor: [25, 16]
    });

    const issMarker = L.marker([0, 0], {icon: issIcon}).addTo(map);

    async function updateISS() {
        const res = await fetch('/iss');
        const data = await res.json();
        const lat = data.latitude;
        const lon = data.longitude;

        issMarker.setLatLng([lat, lon]);
        map.panTo([lat, lon]);
    }

    updateISS();
    setInterval(updateISS, 5000);
</script>

<!-- 3D EARTH SCRIPT -->
<script>
const container = document.getElementById("earth3d");

const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(50, container.offsetWidth / 400, 0.1, 1000);
camera.position.z = 2.5;

const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(container.offsetWidth, 400);
container.appendChild(renderer.domElement);

const controls = new THREE.OrbitControls(camera, renderer.domElement);
controls.enableZoom = false;

// Earth Texture
const loader = new THREE.TextureLoader();
loader.load("https://raw.githubusercontent.com/johan/world.geo.json/master/img/earth.jpg", function(texture) {

    const geo = new THREE.SphereGeometry(1, 32, 32);
    const mat = new THREE.MeshPhongMaterial({ map: texture });

    const earth = new THREE.Mesh(geo, mat);
    scene.add(earth);

    const light = new THREE.PointLight(0xffffff, 1);
    light.position.set(5, 3, 5);
    scene.add(light);

    function animate() {
        requestAnimationFrame(animate);
        earth.rotation.y += 0.0015;
        renderer.render(scene, camera);
    }
    animate();
});
</script>

<!-- ABOUT -->
<div id="about-section" class="container mt-5 mb-5">
    <div class="card shadow-sm">
        <div class="card-body">
            <h3 class="text-primary">About This Project</h3>
            <p>
                This ISS Tracker shows the ISS in real time using ISS API data.
                It also displays astronauts currently aboard and your approximate location.
            </p>
        </div>
    </div>
</div>

<!-- FOOTER -->
<footer class="text-center">
    <p>Want to see the ISS from your location?</p>
    <a class="btn btn-outline-info" href="https://www.nasa.gov/spot-the-station/" target="_blank">
        Spot The Station
    </a>
    <p class="mt-3">&copy; 2025 ISS Tracker</p>
</footer>

=======
    <title>ISS Tracker</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        #map { height: 500px; width: 80%; margin: 20px auto; }
        .info { margin: 20px; }
    </style>
</head>
<body>
    <h1>üõ∞Ô∏è ISS Tracker</h1>
    <div class="info">
        <p>There are currently <strong>{{ count }}</strong> astronauts aboard the ISS:</p>
        <ul>
            {% for person in astronauts %}
                <li>{{ person.name }}</li>
            {% endfor %}
        </ul>

        {% if user_location %}
            <p>Your approximate location: {{ user_location[0] }}, {{ user_location[1] }}</p>
        {% else %}
            <p>Could not determine your location.</p>
        {% endif %}
    </div>

    <div id="map"></div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        const map = L.map('map').setView([0, 0], 2);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '¬© OpenStreetMap contributors'
        }).addTo(map);

        const issIcon = L.icon({
            iconUrl: 'https://upload.wikimedia.org/wikipedia/commons/d/d0/International_Space_Station.svg',
            iconSize: [50, 32],
            iconAnchor: [25, 16]
        });

        const issMarker = L.marker([0, 0], {icon: issIcon}).addTo(map);

        async function updateISS() {
            const res = await fetch('/iss');
            const data = await res.json();
            const lat = data.latitude;
            const lon = data.longitude;

            issMarker.setLatLng([lat, lon]);
            map.panTo([lat, lon]);
        }

        updateISS();
        setInterval(updateISS, 5000);
    </script>
>>>>>>> b39c30135c4d4ab0e1cb8f446ec019fbe868c3e6
</body>
</html>
